{"version":3,"sources":["assets/MediaPlayer.ts","assets/plugins/AutoPlay.ts","assets/plugins/AutoPause.ts","assets/index.js"],"names":["video","document","querySelector","player","MediaPlayer","el","plugins","AutoPlay","AutoPause","playButton","onclick","togglePlay","muteButton","media","muted","unmute","mute","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":";;AGAA;;AHAA,AGCA,ADCA,ADAA,IDFA,AEEA,ADAA,QAAA,CCAA,EFFA;AAAA,AEEA,ADAA;ADFA,AGEA,ADAA,ADAA,YDFA,AEEA,ADAA;ADEE,AEEA,ADHA,WDCA,AEEA,ADHA,QAAA,CCGA,EFFA,ACDA,CDCY,AEEZ,ADHgB,MDChB,EAAkB;AAChB,AEEA,SFFK,AEEA,KFFL,GAAa,CEEb,GAAiB,EFFE,CAAC,CEEpB,CFFA;AACA,AEEA,ADJF,EAAA,ODEO,AEEA,CDJP,CAAA,KDEE,GAAe,CCFjB,CAAA,GAAA,CDEuB,CAAC,CEEtB,ADJF,GCI4B,GFFX,EEEgB,EFFE,ACF/B,EDEF,ICFF,EAAuB,QCIK,CAAwB,IAAxB,CAA6B,IAA7B,CAA1B;AFDA,AGHJ,ADKI,ADJA,MEDEA,EFCE,CDEC,AEEA,ADJA,EEDE,GAAGC,CFCC,CAAC,IDEZ,CCFK,CEDa,AFCA,CEDCC,IFCnB,EAAyB,ECIzB,GAA8B,ECLpB,CAAuB,EDKE,KCLzB,CAAd,gBDKkC,CAA4B,IAA5B,CAAiC,IAAjC,CAA9B;AFDD,AGHH,ADKG,ADJG,MEDAC,AFCA,MEDM,AFCA,CAAC,EEDE,GFCT,CEDaC,AFCA,KAAb,GAAqB,IAArB,QEDS,CAAgB;AAC7BC,AFCG,EEDHA,EAAE,EAAEL,KADyB;AHKrB,AGHRM,ADKA,EFFQ,AGHRA,ADKA,OCLO,EAAE,ADKT,CCLU,ADKV,CFFQ,CAAA,EGHMC,KDKd,CAAA,CFFQ,CAAA,CEER,GAAA,KCLU,EHGF,AGHC,EAAiB,CHG1B,AEEI,GCL0BC,GDK9B,EAAU,IFFV,SGH0B,EAAjB;AHGT,AGL6B,ADQ3B,ADLA,CEHW,CAAf,EFGI,IDEF,CEGO,CDLC,CAAC,EDET,EEGE,ADLA,CDEF,EEGgB,EFHhB,IEGE;ACHJ,ADKI,ADND,GALD,GEMIC,EDKI,QCLM,ADKE,GCLCR,ADKE,IAAI,ICLE,CAACC,aAAT,CAAuB,CDKrB,CAAyB,KAAK,MCLhC,CAAnB,WDKqB,EAAkD;AFJnE,AEKE,MAAA,GFLG,MEKM,CFLX,CAAa,AEKA,KAAK,EFLlB,CAAqB,UAAA,MAAA,EAAM;AACzB,AGDNO,ADIuE,ADLvE,KCKqB,CFHf,AEGF,GDLJ,CECU,CAACC,CHCC,CAAC,GAAP,CAAW,ACFjB,CECA,GAAqB,CHCf,KGDqBP,MAAM,CAACQ,UAAP,EAA3B;AHEK,AEMD,ADjBJ,CAAA,EAAA,CCiBI,CFRA,OEQQ,CAAC,OAAT,CAAiB,KAAK,MAAL,CAAY,KAA7B;AFLD,AGDH,ADQI,GFXM,CEWN,ECREC,MDQM,CAAC,GCRG,GAAGX,QAAQ,CAACC,CDQxB,CAA0B,WCRX,CAAuB,MDQtC,EAA8C,KCR/B,ADQoC,CCRvD,qBDQI;AACD,ADVH,GCAE,IDAF,CAAA,SAAA,CAAA,GAAe,QAAf;ADIE,AGFFU,EHEE,QGFQ,CAACF,EHET,CAAA,IGFF,GAAqB,EHEnB,CAAA,GGFyB,CHEzB,GAAA,YAAA;AACE,AGFF,ADSQ,EAAA,ICTJP,GHEG,EEOC,CCTE,ADSF,CCTGU,CHET,CAAW,GGFT,CHEF,AGFeC,EDST,CAAA,ECTR,EAAwB,cDShB,GAAR,UAA2B,OAA3B,EAA+D;AFN9D,AGFCX,ADSA,GFTF,CGAEA,IDSM,ECTA,CAACY,EDSI,GAAG,CCTd,MDSqB,CAAC,CAAD,CAArB;ACRD,ADUC,GCZF,KDYQ,CCVD,QDUU,GAAG,KAAK,CAAC,iBAAN,IAA2B,KAAK,SAAlD;AFPF,AGFEZ,EHEF,EGFEA,MAAM,CAACa,EHET,CAAA,CGFE,QHEF,CAAA,KAAA,GAAA,YAAA;AACE,AGFD,ADUC,QAAI,CFRC,KAAL,CAAW,EEQX,EAAe,CFRf;AACD,AGFF,ADUK,CChBN,EHME,QEUS,MAAL,CAAY,IAAZ;AACD,KAFD,MAEO;AFPT,AGFF,ADUM,EFRJ,EGFE,ODUO,EFRT,CAAA,GEQI,CAAY,KFRhB,AGFqBC,ADUjB,CFRJ,QGFF,EHEE,AGFgC,GHEhC,YAAA;AACE,AGFFA,ADUG,ECVHA,MHEM,GGFG,CAACC,CHEC,KAAL,CAAW,MAAf,AGFF,CAAwBC,CHEC,OGFzB,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAiDC,KAAK,IAAI;AHGtD,AGFFC,ADUD,GAVO,CCANA,OHEO,AGFA,CAACC,GHEN,AGFF,CAAYF,KAAK,CAACG,OAAlB;AHGC,AGFF,GAFD,EHEE,MAEO;AACL,AGFL,ADUS,EAAA,SFRC,AEQD,CAAA,IFRJ,KEQI,CAAA,sBAAA,GAAR,YAAA;AFPG,AEQD,QAAM,SAAS,GAAG,QAAQ,CAAC,eAAT,KAA6B,SAA/C;AFPD,GAND;AEcE,QAAI,SAAJ,EAAe;AFNjB,AEOI,EFPJ,SEOS,EFPT,CAAA,GEOI,CAAY,IAAZ,CFPJ,CAAA,IAAA,GAAA,YAAA;AACE,AEOC,KAFD,IFLK,EEOE,GFPP,CAAW,KAAX,GAAmB,IAAnB;AACD,AEOG,GFTJ,QESS,MAAL,CAAY,KAAZ;AACD;AFNH,AEOC,EFPD,CEAQ,UFAR,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACE,SAAK,KAAL,CAAW,KAAX,GAAmB,KAAnB;AACD,AEMH,GFRE,MEQF,SAAA;AA1CA,CAAA,EAAA;AFqCA,SAAA,WAAA;AAvCA,AE8CA,CF9CA,EAAA,IE8CA,CAAA,SAAA,CAAA,GAAe,SAAf;;AFLA,OAAA,CAAA,SAAA,CAAA,GAAe,WAAf","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["class MediaPlayer {\n  media: HTMLMediaElement;\n  plugins: Array<any>;\n\n  constructor(config) {\n    this.media = config.el;\n    this.plugins = config.plugins || [];\n    this.initPlugins();\n  }\n\n  private initPlugins() {\n    this.plugins.forEach(plugin => {\n      plugin.run(this);\n    });\n  }\n\n  play() {\n    this.media.play();\n  }\n\n  pause() {\n    this.media.pause();\n  }\n\n  togglePlay() {\n    if (this.media.paused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  mute() {\n    this.media.muted = true;\n  }\n\n  unmute() {\n    this.media.muted = false;\n  }\n}\n\nexport default MediaPlayer;\n","import MediaPlayer from '../MediaPlayer';\n\nclass AutoPlay {\n  constructor() {}\n  run(player: MediaPlayer) {\n    if (!player.media.muted) {\n      player.media.muted = true;\n    }\n    player.play();\n  }\n}\n\nexport default AutoPlay;\n","import MediaPlayer from '../MediaPlayer';\n\nclass AutoPause {\n  private threshold: number;\n  player: MediaPlayer;\n\n  constructor() {\n    this.threshold = 0.25;\n    this.handleIntersection = this.handleIntersection.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  }\n\n  run(player) {\n    this.player = player;\n\n    const observer = new IntersectionObserver(this.handleIntersection, {\n      threshold: this.threshold,\n    });\n\n    observer.observe(this.player.media);\n\n    document.addEventListener('visibilitychange', this.handleVisibilityChange);\n  }\n\n  private handleIntersection(entries: IntersectionObserverEntry[]) {\n    const entry = entries[0];\n\n    const isVisible = entry.intersectionRatio >= this.threshold;\n\n    if (isVisible) {\n      this.player.play();\n    } else {\n      this.player.pause();\n    }\n  }\n\n  private handleVisibilityChange() {\n    const isVisible = document.visibilityState === 'visible';\n    if (isVisible) {\n      this.player.play();\n    } else {\n      this.player.pause();\n    }\n  }\n}\n\nexport default AutoPause;\n","import MediaPlayer from './MediaPlayer';\nimport AutoPlay from './plugins/AutoPlay';\nimport AutoPause from './plugins/AutoPause';\n\nconst video = document.querySelector('video');\nconst player = new MediaPlayer({\n  el: video,\n  plugins: [new AutoPlay(), new AutoPause()],\n});\n\nconst playButton = document.querySelector('#playButton');\nplayButton.onclick = () => player.togglePlay();\n\nconst muteButton = document.querySelector('#muteButton');\nmuteButton.onclick = () => {\n  if (player.media.muted) {\n    player.unmute();\n  } else {\n    player.mute();\n  }\n};\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js').catch(error => {\n    console.log(error.message);\n  });\n}\n"]}